INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.rrivasl.pruebas.EjecutorPruebasCucumber
14:27:16.135 [main] INFO org.springframework.boot.devtools.restart.RestartApplicationListener -- Restart disabled due to context in which it is running
2025-07-23 14:27:16 - c.r.p.c.CucumberSpringConfiguration - INFO - Starting CucumberSpringConfiguration using Java 17.0.11 with PID 22576 (started by uman_ in D:\Doc_HP_RRL\RRL\Sence\Iseg Spa\Modulo 5\Ejercicios\Generador BDD_01)
2025-07-23 14:27:16 - c.r.p.c.CucumberSpringConfiguration - INFO - The following 1 profile is active: "test"
2025-07-23 14:27:17 - o.s.w.c.s.GenericWebApplicationContext - DEBUG - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@64b7225f
2025-07-23 14:27:22 - org.hibernate.orm.deprecation - WARN - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-23 14:27:23 - org.hibernate.SQL - DEBUG - 
    drop table if exists productos cascade
2025-07-23 14:27:23 - org.hibernate.SQL - DEBUG - 
    drop table if exists usuarios cascade
2025-07-23 14:27:23 - org.hibernate.SQL - DEBUG -
    create table productos (
        precio numeric(38,2) not null,
        stock integer not null,
        id bigint generated by default as identity,
        categoria varchar(255),
        codigoProducto varchar(255) not null unique,
        descripcion varchar(255),
        nombre varchar(255) not null,
        primary key (id)
    )
2025-07-23 14:27:23 - org.hibernate.SQL - DEBUG - 
    create table usuarios (
        id bigint generated by default as identity,
        nombreUsuario varchar(50) not null unique,
        apellido varchar(100) not null,
        contrasena varchar(100) not null,
        nombre varchar(100) not null,
        correoElectronico varchar(150) not null unique,
        estado varchar(255) not null check (estado in ('ACTIVO','INACTIVO','BLOQUEADO')),
        telefono varchar(255),
        primary key (id)
    )
2025-07-23 14:27:23 - com.rrivasl.AplicacionPrincipal - INFO - ? Ejecutando configuraciones post-inicio...
2025-07-23 14:27:23 - com.rrivasl.AplicacionPrincipal - INFO - ? Memoria disponible: 1024 MB
2025-07-23 14:27:23 - com.rrivasl.AplicacionPrincipal - INFO - ?? Procesadores disponibles: 8
2025-07-23 14:27:23 - com.rrivasl.AplicacionPrincipal - INFO - ? Configuración post-inicio completada
2025-07-23 14:27:26 - o.s.w.s.m.m.a.RequestMappingHandlerAdapter - DEBUG - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-23 14:27:26 - o.s.w.s.m.m.a.RequestMappingHandlerMapping - DEBUG - 13 mappings in 'requestMappingHandlerMapping'
2025-07-23 14:27:26 - o.s.w.s.h.SimpleUrlHandlerMapping - DEBUG - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-07-23 14:27:26 - o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - DEBUG - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-23 14:27:27 - c.r.p.c.CucumberSpringConfiguration - INFO - Started CucumberSpringConfiguration in 11.275 seconds (process running for 13.545)
Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended

@productos @creacion
Escenario: Registrar nuevo producto exitosamente          # features/gestion_productos.feature:12
? Sistema disponible para pruebas - Roberto Rivas López
  Dado que el sistema est?¡ disponible                     # com.rrivasl.pruebas.definiciones.DefinicionesPruebaBasica.queElSistemaEstaDisponible()
? Autenticado con permisos de gestión - Roberto Rivas López
  Y que estoy autenticado con permisos de gesti??n         # com.rrivasl.pruebas.definiciones.DefinicionesProductos.queEstoyAutenticadoConPermisosDeGestion()
? Preparando datos de producto: {nombre=Laptop Dell Inspiron, descripcion=Laptop para oficina, precio=599990, categoria=ELECTRONICA, stock=10, codigoProducto=DELL-INSP-001}
  Dado que tengo los datos de un producto:                # com.rrivasl.pruebas.definiciones.DefinicionesProductos.queTengoLosDatosDeUnProducto(io.cucumber.datatable.DataTable)
    | nombre         | Laptop Dell Inspiron |
    | descripcion    | Laptop para oficina  |
    | precio         | 599990               |
    | categoria      | ELECTRONICA          |
    | stock          | 10                   |
    | codigoProducto | DELL-INSP-001        |
? Enviando petición de creación de producto...
? Producto creado exitosamente con ID: 1
? Código de estado establecido: 201
  Cuando env??o una petici??n para crear el producto        # com.rrivasl.pruebas.definiciones.DefinicionesProductos.envioUnaPeticionParaCrearElProducto()
? Verificando creación exitosa del producto
? Código de estado actual: 201
Producto creado exitosamente con ID: 1
  Entonces el producto deber??a crearse exitosamente       # com.rrivasl.pruebas.definiciones.DefinicionesProductos.elProductoDeberiaCrearseExitosamente()
? Verificando código de estado:
   Esperado: 201
   Actual: 0
  Y deber??a recibir c??digo de estado 201                  # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.deberiaRecibirCodigoDeEstado(int)
      org.opentest4j.AssertionFailedError: C??digo de estado deber??a coincidir. Esperado: 201, Actual: 0 ==> expected: <201> but was: <0>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:150)
        at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:560)
        at com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.deberiaRecibirCodigoDeEstado(DefinicionesUsuarios.java:248)
        at â?½.deber??a recibir c??digo de estado 201(classpath:features/gestion_productos.feature:22)

  Y el producto deber??a estar disponible en el inventario # com.rrivasl.pruebas.definiciones.DefinicionesProductos.elProductoDeberiaEstarDisponibleEnElInventario()

@productos @validacion
Escenario: Error al registrar producto con c??digo duplicado # features/gestion_productos.feature:26
? Sistema disponible para pruebas - Roberto Rivas López
  Dado que el sistema est?¡ disponible                       # com.rrivasl.pruebas.definiciones.DefinicionesPruebaBasica.queElSistemaEstaDisponible()
? Autenticado con permisos de gestión - Roberto Rivas López
  Y que estoy autenticado con permisos de gesti??n           # com.rrivasl.pruebas.definiciones.DefinicionesProductos.queEstoyAutenticadoConPermisosDeGestion()
? Verificando producto existente con código: PROD-001
? Producto temporal creado para prueba
  Dado que existe un producto con c??digo "PROD-001"         # com.rrivasl.pruebas.definiciones.DefinicionesProductos.queExisteUnProductoConCodigo(java.lang.String)
?? Intentando crear producto con código duplicado
? Error de duplicación capturado correctamente: El código del producto ya existe
? Código de estado establecido: 409
  Cuando intento crear otro producto con el mismo c??digo    # com.rrivasl.pruebas.definiciones.DefinicionesProductos.intentoCrearOtroProductoConElMismoCodigo()
? Verificando código de estado:
   Esperado: 409
   Actual: 0
  Entonces deber??a recibir c??digo de estado 409             # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.deberiaRecibirCodigoDeEstado(int)
      org.opentest4j.AssertionFailedError: C??digo de estado deber??a coincidir. Esperado: 409, Actual: 0 ==> expected: <409> but was: <0>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:150)
        at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:560)
        at com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.deberiaRecibirCodigoDeEstado(DefinicionesUsuarios.java:248)
        at â?½.deber??a recibir c??digo de estado 409(classpath:features/gestion_productos.feature:29)

  Y deber??a ver mensaje "El c??digo del producto ya existe"  # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.deberiaVerMensaje(java.lang.String)

@productos @consulta
Escenario: Buscar producto por c??digo                 # features/gestion_productos.feature:33
? Sistema disponible para pruebas - Roberto Rivas López
  Dado que el sistema est?¡ disponible                 # com.rrivasl.pruebas.definiciones.DefinicionesPruebaBasica.queElSistemaEstaDisponible()
? Autenticado con permisos de gestión - Roberto Rivas López
  Y que estoy autenticado con permisos de gesti??n     # com.rrivasl.pruebas.definiciones.DefinicionesProductos.queEstoyAutenticadoConPermisosDeGestion()
? Verificando producto existente con código: LAPTOP-001
? Producto temporal creado para prueba
  Dado que existe un producto con c??digo "LAPTOP-001" # com.rrivasl.pruebas.definiciones.DefinicionesProductos.queExisteUnProductoConCodigo(java.lang.String)
? Buscando producto por código: LAPTOP-001
? Producto encontrado: Producto Existente
? Código de estado establecido: 200
  Cuando busco el producto por c??digo "LAPTOP-001"    # com.rrivasl.pruebas.definiciones.DefinicionesProductos.buscoElProductoPorCodigo(java.lang.String)
? Verificando que el producto fue encontrado
? Código de estado actual: 200
  Entonces deber??a encontrar el producto              # com.rrivasl.pruebas.definiciones.DefinicionesProductos.deberiaEncontrarElProducto()
? Verificando datos del producto
Datos del producto verificados correctamente
   Nombre: Producto Existente
   Código: LAPTOP-001
   Precio: $100.00
  Y los datos del producto deber??an ser correctos     # com.rrivasl.pruebas.definiciones.DefinicionesProductos.losDatosDelProductoDeberianSerCorrectos()

@usuarios @creacion
Escenario: Crear un nuevo usuario exitosamente          # features/gestion_usuarios.feature:12
? Sistema disponible para pruebas - Roberto Rivas López
  Dado que el sistema est?¡ disponible                   # com.rrivasl.pruebas.definiciones.DefinicionesPruebaBasica.queElSistemaEstaDisponible()
? Autenticado como administrador - Roberto Rivas López
  Y que estoy autenticado como administrador            # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.queEstoyAutenticadoComoAdministrador()
? Preparando datos de nuevo usuario: {nombre=Roberto Pérez, apellido=González, correoElectronico=rperez@test.com, nombreUsuario=rperez, contrasena=MiClave123!}
  Dado que tengo los datos de un nuevo usuario:         # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.queTengoLosDatosDeUnNuevoUsuario(io.cucumber.datatable.DataTable)
    | nombre            | Roberto P??rez   |
    | apellido          | Gonz?¡lez        |
    | correoElectronico | rperez@test.com |
    | nombreUsuario     | rperez          |
    | contrasena        | MiClave123!     |
? Enviando solicitud de creación de usuario...
2025-07-23 14:27:28 - c.r.s.impl.ServicioUsuarioImpl - INFO - Creando nuevo usuario: rperez
2025-07-23 14:27:28 - c.r.s.impl.ServicioUsuarioImpl - INFO - Usuario creado exitosamente con ID: 1
? Usuario creado exitosamente con ID: 1
? Código de estado establecido: 201
  Cuando env??o una solicitud para crear el usuario      # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.envioUnaSolicitudParaCrearElUsuario()
? Verificando creación exitosa del usuario
? Código de estado actual: 201
Usuario creado exitosamente con ID: 1
  Entonces el usuario deber??a crearse exitosamente      # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.elUsuarioDeberiaCrearseExitosamente()
? Verificando código de estado:
   Esperado: 201
   Actual: 201
  Y deber??a recibir c??digo de estado 201                # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.deberiaRecibirCodigoDeEstado(int)
? Verificando que el usuario aparece en la lista
Usuario confirmado en la lista
  Y el usuario deber??a aparecer en la lista de usuarios # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.elUsuarioDeberiaAparecerEnLaListaDeUsuarios()

@usuarios @validacion
Escenario: Error al crear usuario con correo duplicado             # features/gestion_usuarios.feature:25
? Sistema disponible para pruebas - Roberto Rivas López
  Dado que el sistema est?¡ disponible                              # com.rrivasl.pruebas.definiciones.DefinicionesPruebaBasica.queElSistemaEstaDisponible()
? Autenticado como administrador - Roberto Rivas López
  Y que estoy autenticado como administrador                       # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.queEstoyAutenticadoComoAdministrador()
? Verificando usuario existente con correo: existente@test.com
2025-07-23 14:27:28 - c.r.s.impl.ServicioUsuarioImpl - INFO - Creando nuevo usuario: temp_user_1753295248883
2025-07-23 14:27:28 - c.r.s.impl.ServicioUsuarioImpl - INFO - Usuario creado exitosamente con ID: 2
? Usuario temporal creado para prueba
  Dado que existe un usuario con correo "existente@test.com"       # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.queExisteUnUsuarioConCorreo(java.lang.String)
?? Intentando crear usuario con correo duplicado
2025-07-23 14:27:28 - c.r.s.impl.ServicioUsuarioImpl - INFO - Creando nuevo usuario: duplicate_user_1753295248884
? Error de duplicación capturado correctamente: El correo electrónico ya está registrado
? Código de estado establecido: 409
  Cuando intento crear un usuario con el mismo correo              # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.intentoCrearUnUsuarioConElMismoCorreo()
? Verificando código de estado:
   Esperado: 409
   Actual: 409
  Entonces deber??a recibir c??digo de estado 409                    # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.deberiaRecibirCodigoDeEstado(int)
? Verificando mensaje:
   Esperado: El correo electrónico ya está registrado
   Actual: El correo electrónico ya está registrado
Mensaje verificado correctamente
  Y deber??a ver mensaje "El correo electr??nico ya est?¡ registrado" # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.deberiaVerMensaje(java.lang.String)

@usuarios @busqueda
Escenario: Buscar usuario por nombre de usuario   # features/gestion_usuarios.feature:32
? Sistema disponible para pruebas - Roberto Rivas López
  Dado que el sistema est?¡ disponible             # com.rrivasl.pruebas.definiciones.DefinicionesPruebaBasica.queElSistemaEstaDisponible()
? Autenticado como administrador - Roberto Rivas López
  Y que estoy autenticado como administrador      # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.queEstoyAutenticadoComoAdministrador()
? Verificando usuario existente con nombre: rrivasl
2025-07-23 14:27:28 - c.r.s.impl.ServicioUsuarioImpl - INFO - Creando nuevo usuario: rrivasl
2025-07-23 14:27:28 - c.r.s.impl.ServicioUsuarioImpl - INFO - Usuario creado exitosamente con ID: 3
? Usuario con nombre creado para prueba
  Dado que existe un usuario con nombre "rrivasl" # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.queExisteUnUsuarioConNombre(java.lang.String)
? Buscando usuario por nombre: rrivasl
? Usuario encontrado: Roberto Rivas López
? Código de estado establecido: 200
  Cuando busco el usuario por nombre "rrivasl"    # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.buscoElUsuarioPorNombre(java.lang.String)
? Verificando que el usuario fue encontrado
? Código de estado actual: 200
  Entonces deber??a encontrar el usuario           # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.deberiaEncontrarElUsuario()
? Verificando datos del usuario
Datos del usuario verificados correctamente
   Nombre: Roberto Rivas López
   Correo: rrivasl@test.com
  Y los datos del usuario deber??an ser correctos  # com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.losDatosDelUsuarioDeberianSerCorrectos()

Escenario: Verificaci??n b?¡sica del sistema      # features/prueba_basica.feature:7
? Sistema funcionando - Roberto Rivas López
  Dado que el sistema est?¡ funcionando          # com.rrivasl.pruebas.definiciones.DefinicionesPruebaBasica.queElSistemaEstaFuncionando()
? Ejecutando prueba básica...
  Cuando ejecuto una prueba b?¡sica              # com.rrivasl.pruebas.definiciones.DefinicionesPruebaBasica.ejecutoUnaPruebaBasica()
? ¡Prueba exitosa!
  Entonces deber??a obtener un resultado exitoso # com.rrivasl.pruebas.definiciones.DefinicionesPruebaBasica.deberiaObtenerUnResultadoExitoso()

Escenario: Verificaci??n de disponibilidad     # features/prueba_basica.feature:12
? Sistema disponible para pruebas - Roberto Rivas López
  Dado que el sistema est?¡ disponible         # com.rrivasl.pruebas.definiciones.DefinicionesPruebaBasica.queElSistemaEstaDisponible()
? Verificando estado del sistema...
  Cuando verifico el estado del sistema       # com.rrivasl.pruebas.definiciones.DefinicionesPruebaBasica.verificoElEstadoDelSistema()
? Sistema operativo confirmado
  Entonces el sistema deber??a estar operativo # com.rrivasl.pruebas.definiciones.DefinicionesPruebaBasica.elSistemaDeberiaEstarOperativo()
[ERROR] Tests run: 8, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 13.98 s <<< FAILURE! -- in com.rrivasl.pruebas.EjecutorPruebasCucumber
[ERROR] Gestión de productos del inventario.Registrar nuevo producto exitosamente -- Time elapsed: 13.16 s <<< FAILURE!
org.opentest4j.AssertionFailedError: Código de estado debería coincidir. Esperado: 201, Actual: 0 ==> expected: <201> but was: <0>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:150)
        at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:560)
        at com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.deberiaRecibirCodigoDeEstado(DefinicionesUsuarios.java:248)
        at ?.debería recibir código de estado 201(classpath:features/gestion_productos.feature:22)

[ERROR] Gestión de productos del inventario.Error al registrar producto con código duplicado -- Time elapsed: 0.069 s <<< FAILURE!
org.opentest4j.AssertionFailedError: Código de estado debería coincidir. Esperado: 409, Actual: 0 ==> expected: <409> but was: <0>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:150)
        at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:560)
        at com.rrivasl.pruebas.definiciones.DefinicionesUsuarios.deberiaRecibirCodigoDeEstado(DefinicionesUsuarios.java:248)
        at ?.debería recibir código de estado 409(classpath:features/gestion_productos.feature:29)

[INFO] 
[INFO] Results:
[INFO]
[ERROR] Failures: 
[ERROR]   Código de estado debería coincidir. Esperado: 409, Actual: 0 ==> expected: <409> but was: <0>
[ERROR]   Código de estado debería coincidir. Esperado: 201, Actual: 0 ==> expected: <201> but was: <0>
[INFO]
[ERROR] Tests run: 8, Failures: 2, Errors: 0, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  25.000 s
[INFO] Finished at: 2025-07-23T14:27:29-04:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.1.2:test (default-test) on project mi-proyecto-cucumber: There are test failures.
[ERROR]
[ERROR] Please refer to D:\Doc_HP_RRL\RRL\Sence\Iseg Spa\Modulo 5\Ejercicios\Generador BDD_01\target\surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException